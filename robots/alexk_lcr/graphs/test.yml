nodes:
  - id: opencv-camera
    build: pip install ../../../node_hub/opencv-camera
    path: opencv-camera
    inputs:
      pull_image:
        source: lerobot-dashboard/tick
        queue_size: 1
    outputs:
      - image

    env:
      CAMERA_ID: 0
      CAMERA_WIDTH: 860
      CAMERA_HEIGHT: 540

  - id: video-encoder
    build: pip install ../../../node_hub/video-encoder
    path: video-encoder
    inputs:
      image: opencv-camera/image
      episode_index: lerobot-dashboard/episode
    outputs:
      - image

    env:
      VIDEO_NAME: cam_up
      VIDEO_WIDTH: 860
      VIDEO_HEIGHT: 540
      FPS: 30

  - id: lerobot-dashboard
    build: pip install ../../../node_hub/lerobot-dashboard
    path: lerobot-dashboard
    inputs:
      tick:
        source: dora/timer/millis/16
        queue_size: 1

      image_left: opencv-camera/image
    outputs:
      - tick
      - episode
      - failed
      - end

    env:
      CAMERA_WIDTH: 860
      CAMERA_HEIGHT: 540

  - id: dora-record
    build: cargo install dora-record
    path: dora-record
    inputs:
      episode_index: lerobot-dashboard/episode
      failed_episode_index: lerobot-dashboard/failed
      observation.images.cam_up: video-encoder/image