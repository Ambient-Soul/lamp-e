nodes:
  - id: lebai-client
    build: pip install -e ../../../node-hub/lebai-client
    path: lebai-client
    inputs:
      movec:
        source: interpolation/movec
        queue_size: 1
      movej:
        source: interpolation/movej
        queue_size: 1
      claw: interpolation/claw
      stop: interpolation/stop
      save: interpolation/save
      go_to: interpolation/go_to
      record: interpolation/record
      cut: interpolation/cut
      play: interpolation/play
      teach: interpolation/teach
      end_teach: interpolation/end_teach

  - id: keyboard-listener
    build: pip install dora-keyboard
    path: dora-keyboard
    outputs:
      - char

  - id: dora-microphone
    build: pip install dora-microphone
    path: dora-microphone
    outputs:
      - audio

  - id: dora-distil-whisper
    build: pip install dora-distil-whisper
    path: dora-distil-whisper
    inputs:
      input: dora-microphone/audio
    outputs:
      - text

  - id: terminal-print
    path: dynamic
    inputs:
      text: dora-distil-whisper/text

  - id: key-interpolation
    path: ../nodes/key_interpolation.py
    inputs:
      keyboard: keyboard-listener/char
    outputs:
      - text

  - id: interpolation
    path: ../nodes/interpolation.py
    inputs:
      keyboard: keyboard-listener/char
      text: dora-distil-whisper/text
    outputs:
      - movec
      - movej
      - claw
      - stop
      - save
      - record
      - play
      - go_to
      - cut
      - teach
      - end_teach

  - id: camera
    build: pip install opencv-video-capture
    path: opencv-video-capture
    inputs:
      tick: dora/timer/millis/16
    outputs:
      - image
    env:
      CAPTURE_PATH: 8
      IMAGE_WIDTH: 640
      IMAGE_HEIGHT: 480

  - id: plot
    build: cargo install dora-rerun --locked
    path: dora-rerun
    inputs:
      image:
        source: camera/image
        queue_size: 1
      textlog_vlm: dora-qwenvl/text
    env:
      IMAGE_WIDTH: 640
      IMAGE_HEIGHT: 480

  - id: dora-qwenvl
    build: pip install -e ../../node-hub/dora-qwenvl
    path: dora-qwenvl
    inputs:
      image:
        source: camera/image
        queue_size: 1
      ground_truth:
        source: key-interpolation/text
        queue_size: 1
    outputs:
      - text

  - id: terminal-input
    build: pip install ../../node-hub/terminal-input
    path: dynamic
    inputs:
      text: dora-qwenvl/text
    outputs:
      - data
